


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">

  <nav class="bg-white shadow-md">


    <div class="flex justify-between items-center max-w-7xl mx-auto px-6 py-4 ">


      <div class="text-2xl text-indigo-700 font-bold ">Admin Dashboard</div>


      <div class="flex items-center space-x-4">


        <a href="{% url 'home' %}" class="hover:text-indigo-700">Home</a>


        <a href="{% url 'create-group' %}" class="hover: bg-indigo-700 text-white px-4 py-2 rounded bg-indigo-600 ">Create Role</a>


        <a href="{% url 'group-list' %}" class="hover:bg-indigo-700 bg-indigo-600 rounded text-white px-4 py-2 ">Groups</a>


        <a href="{% url 'category-list' %}" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded">Categories</a>


        <a href="{% url 'event-create' %}" class="bg-indigo-600 py-2 rounded  hover:bg-indigo-700 text-white px-4 ">Create Event</a>

        <form action="{% url 'logout' %}" method="POST" class="inline">
          {% csrf_token %}


          <button type="submit" class="text-red-600 hover:underline">Logout</button>
        </form>


      </div>
    </div>
  </nav>



  <div class="p-6 max-w-7xl mx-auto mt-6 space-y-12">



    <section>
      <div class="flex justify-between items-center mb-4">


        <h2 class="text-xl font-semibold">All Events</h2>


        <form method="GET" class="flex space-x-2">


          <input name="event_search" value="{{ event_search }}" placeholder="Search by title/date" class="border border-gray-300 rounded px-3 py-1" />


          <button type="submit" class="bg-indigo-600  hover:bg-indigo-700 text-white px-3 py-1 rounded ">Search</button>
        </form>
      </div>



      <table class="w-full bg-white rounded shadow">

        <thead class="bg-gray-200">


          <tr>
            <th class="p-3 text-left">Title</th>


            <th class="p-3 text-left">Date</th>

            <th class="p-3 text-left">Cost</th>

            <th class="p-3 text-left">Actions</th>
          </tr>
        </thead>


        <tbody>

          {% for event in events %}
          <tr class="border-b hover:bg-gray-50">


            <td class="p-3">{{ event.title }}</td>

            <td class="p-3">{{ event.date }}</td>

            <td class="p-3">{{ event.cost }}</td>
            <td class="p-3 space-x-2">
              <a href="{% url 'event_update' event.id %}" class=
              "bg-blue-500 text-white px-3 py-1 rounded">Edit</a>
              <a href="{% url 'event_delete' event.id %}" class=" py-1 rounded bg-red-500 text-white px-3">Delete</a>


              <a href="{% url 'event-detail' event.id %}" class="bg-green-500 text-white px-3 py-1 rounded">View</a>


            </td>
          </tr>
          {% empty %}


          <tr><td colspan="4" class="text-center p-4">No events found.</td></tr>
          {% endfor %}

        </tbody>
      </table>

    </section>

    <section>
      <div class="flex justify-between items-center mb-4">


        <h2 class="text-xl font-semibold">All Participants</h2>


        <form method="GET" class="flex space-x-2">


          <input name="participant_search" value="{{ participant_search }}" placeholder="Search by name/email" class="border border-gray-300 rounded px-3 py-1" />



          <button type="submit" class="bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-700">Search</button>
        </form>

      </div>

      <table class="w-full bg-white rounded shadow">


        <thead class="bg-gray-200">
          <tr>

            <th class="p-3 text-left">Name</th>

            <th class="p-3 text-left">Email</th>


            <th class="p-3 text-left">Event</th>
            <th class="p-3 text-left">Actions</th>

          </tr>
        </thead>
        <tbody>
          {% for p in participants %}

          <tr class="border-b hover:bg-gray-50">
            <td class="p-3">{{ p.name }}</td>


            <td class="p-3">{{ p.email }}</td>
            <td class="p-3">{{ p.event.title }}</td>
            <td class="p-3">

              <a href="{% url 'participant_delete' p.id %}?next={% url 'admin-dashboard' %}">

                <button class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded">Remove</button>
              </a>
            </td>

          </tr>

          {% empty %}
          <tr><td colspan="4" class="text-center p-4">No participants found.</td></tr>
          {% endfor %}


        </tbody>
      </table>
    </section>

    <section>
      <div class="flex justify-between items-center mb-4">


        <h2 class="font-semibold text-xl ">All Users</h2>
        <form method="GET" class="flex space-x-2">

          <input name="user_search" value="{{ user_search }}" placeholder="Search by username/email" class="border border-gray-300 rounded px-3 py-1" />


          <button type="submit" class="bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-700">Search</button>
        </form>
      </div>

      <table class="w-full bg-white rounded shadow">


        <thead class="bg-gray-200">
          <tr>
            <th class="p-3 text-left">Username</th>


            <th class="p-3 text-left">Email</th>


            <th class="p-3 text-left">Role</th>
            <th class="p-3 text-center">Actions</th>

          </tr>


        </thead>
        <tbody>
          {% for user in users %}
          <tr class="border-b hover:bg-gray-50">


            <td class="p-3">{{ user.username }}</td>
            <td class="p-3">{{ user.email }}</td>


            <td class="p-3">{{ user.groups.first.name|default:"No Group" }}</td>
            <td class="p-3 text-center">
              <a href="{% url 'assign-role' user.id %}">


                <button class="bg-blue-500 text-white px-4 py-1.5 rounded hover:bg-blue-600">Change Role</button>
              </a>


            </td>
          </tr>
          {% empty %}

          <tr><td colspan="4" class="text-center p-4">No users found.</td></tr>
          {% endfor %}
        </tbody>
      </table>
      
    </section>

  </div>

</body>
</html>
